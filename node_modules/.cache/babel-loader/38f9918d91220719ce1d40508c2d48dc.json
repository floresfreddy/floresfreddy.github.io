{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"/Users/freddyflores/Projects/floresfreddy.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/freddyflores/Projects/floresfreddy.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/freddyflores/Projects/floresfreddy.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/freddyflores/Projects/floresfreddy.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/freddyflores/Projects/floresfreddy.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Search from\"./Search\";import MovieList from\"./MovieList.js\";import Nominations from\"./Nominations.js\";var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(){var _this;_classCallCheck(this,Main);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={movies:[],favorites:[],search:''};_this.saveToLocalStorage=function(items){localStorage.setItem('react-movie-app-favorites',JSON.stringify(items));};_this.addFavoriteMovie=function(movie){if(_this.state.favorites.length>4)return;var newFavoriteList=[].concat(_toConsumableArray(_this.state.favorites),[movie]);_this.setState({favorites:newFavoriteList});_this.saveToLocalStorage(newFavoriteList);};_this.removeFavoriteMovie=function(movie){var newFavoriteList=_this.state.favorites.filter(function(favorite){return favorite.imdbID!==movie.imdbID;});_this.setState({favorites:newFavoriteList});_this.saveToLocalStorage(newFavoriteList);};_this.searchMovies=function(search){if(search.length>2){fetch(\"http://www.omdbapi.com/?s=\".concat(search,\"&apikey=6ec34811\")).then(function(res){return res.json();}).then(function(movies){if(movies.Response!=='False')_this.setState({movies:movies.Search,search:search});});}else if(search.length!==0){fetch(\"http://www.omdbapi.com/?t=\".concat(search,\"&apikey=6ec34811\")).then(function(res){return res.json();}).then(function(movie){if(movie){_this.setState({movies:[movie],search:search});}});}else{_this.setState({movies:[],search:\"\"});}};return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(JSON.parse(localStorage.getItem('react-movie-app-favorites')));var faves=JSON.parse(localStorage.getItem('react-movie-app-favorites'));this.setState({favorites:_toConsumableArray(faves)},function(){return console.log(_this2.state.favorites);});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[this.state.favorites.length===5?/*#__PURE__*/_jsx(\"h1\",{class:\"ui green fluid button\",children:\"Your Nominations are full!\"}):/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"The Shoppies\"}),/*#__PURE__*/_jsx(Search,{searching:this.searchMovies}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"column box\",style:{order:0,flexGrow:1},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Results for... \",this.state.search]}),/*#__PURE__*/_jsx(MovieList,{movies:this.state.movies,favorites:this.state.favorites,handleFavorites:this.addFavoriteMovie})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"column box\",style:{order:1,flexGrow:1},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Nominations (\",this.state.favorites.length,\"/5)\"]}),/*#__PURE__*/_jsx(Nominations,{movies:this.state.favorites,handleFavorites:this.removeFavoriteMovie})]})]})]});}}]);return Main;}(Component);export default Main;","map":{"version":3,"sources":["/Users/freddyflores/Projects/floresfreddy.github.io/src/components/Main.js"],"names":["React","Component","Search","MovieList","Nominations","Main","state","movies","favorites","search","saveToLocalStorage","items","localStorage","setItem","JSON","stringify","addFavoriteMovie","movie","length","newFavoriteList","setState","removeFavoriteMovie","filter","favorite","imdbID","searchMovies","fetch","then","res","json","Response","console","log","parse","getItem","faves","order","flexGrow"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Search from \"./Search\";\nimport MovieList from \"./MovieList.js\"\nimport Nominations from \"./Nominations.js\"\n\n\nclass Main extends Component {\n  \n    state = {\n        movies: [],\n        favorites:[],\n        search :''\n    }\n\n    saveToLocalStorage = (items) => {\n        localStorage.setItem('react-movie-app-favorites', JSON.stringify(items));\n    };\n\n    addFavoriteMovie = (movie) => {\n        if(this.state.favorites.length > 4) return\n        const newFavoriteList = [...this.state.favorites, movie];\n        this.setState({\n            favorites: newFavoriteList\n        })\n        this.saveToLocalStorage(newFavoriteList);\n    };\n\n    removeFavoriteMovie = (movie) => {\n        const newFavoriteList = this.state.favorites.filter(\n            (favorite) => favorite.imdbID !== movie.imdbID\n        );\n\n        this.setState({\n            favorites: newFavoriteList\n        });\n        this.saveToLocalStorage(newFavoriteList);\n    };\n\n    searchMovies = (search) => {\n        \n        if(search.length > 2){\n            fetch(`http://www.omdbapi.com/?s=${search}&apikey=6ec34811`)\n            .then(res => res.json()) \n            .then(movies => {\n                if(movies.Response !== 'False')\n                this.setState({\n                movies: movies.Search,\n                search: search\n            })\n        })\n    }\n    else if(search.length !== 0){\n        fetch(`http://www.omdbapi.com/?t=${search}&apikey=6ec34811`)\n        .then(res => res.json())\n        .then(movie => {\n            if(movie){\n                this.setState({\n                    movies: [movie],\n                    search: search\n                })\n            }\n            })\n        }\n        else {\n            this.setState({\n                movies: [],\n                search: \"\"\n            })\n        }\n    }\n    \n    componentDidMount(){\n        console.log(JSON.parse(localStorage.getItem('react-movie-app-favorites')))\n        let faves = JSON.parse(localStorage.getItem('react-movie-app-favorites'))\n        this.setState({\n            favorites: [...faves]\n        }, () => console.log(this.state.favorites))\n    }\n\n    render() {\n        return (\n        <div className= 'main-container'>\n            {this.state.favorites.length === 5? <h1 class = \"ui green fluid button\" >Your Nominations are full!</h1>: <p></p>}  \n            <h1>The Shoppies</h1>\n            <Search searching = {this.searchMovies} />\n            <div className='flex-container'>\n                <div className=\"column box\" style={{order: 0, flexGrow:1}}>\n                    <h2>Results for... {this.state.search}</h2>\n                    <MovieList movies = {this.state.movies} favorites = {this.state.favorites} handleFavorites = {this.addFavoriteMovie}/>\n                </div>\n                <div className=\"column box\" style={{order: 1, flexGrow:1}}>\n                    <h2>Nominations ({this.state.favorites.length}/5)</h2>\n                    <Nominations movies = {this.state.favorites} handleFavorites = {this.removeFavoriteMovie}/>     \n                </div>\n            </div>\n        </div>\n        );\n    }\n}\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}